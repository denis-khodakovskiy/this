# THIS: That Handles It Somehow

**THIS** — это минималистичное ядро для PHP-приложений,
ориентированное на явную архитектуру, предсказуемый bootstrap
и полное отсутствие скрытой магии.

Проект сознательно отказывается от автоконфигурации,
сканирования кода и compile-time контейнеров
в пользу **явной сборки приложения**
и **прозрачного runtime-поведения**.

THIS предназначен для разработчиков,
которые ценят контроль, ясность и архитектурное мышление
выше удобных абстракций.

---

## Ключевые принципы

### 1. Явность важнее удобства
- Нет сканирования классов
- Нет autowire
- Нет неявного обнаружения сервисов
- Нет «догадок» контейнера

Если что-то используется — это должно быть **явно зарегистрировано**.

---

### 2. Контейнер читается, а не строится
В THIS контейнер — это **описание сборки**, а не результат компиляции.

- Нет этапа build container
- Нет кэша контейнера
- Нет прогрева

Контейнер просто загружается как конфигурация.
PHP OPcache делает остальное.

Cold start быстрый и предсказуемый.

---

### 3. Архитектура важнее DX-сахара
THIS — не фреймворк для быстрого CRUD или zero-config приложений.

Он предназначен для:
- инфраструктурного кода
- сложных пайплайнов
- CLI и worker-систем
- приложений с чёткими границами ответственности

DX достигается **структурой**, а не автоматикой.

---

### 4. Отсутствие глобальной магии
- Нет глобального контейнера
- Нет service locator’ов
- Нет скрытых зависимостей

Все зависимости:
- объявлены явно
- либо создаются на boundary-уровнях (bootstrap, handlers)

---

## Структура системы

THIS разделяет систему на **чёткие архитектурные слои**,
каждый с ограниченной ответственностью.

---

### Ядро (Kernel)
Отвечает за:
- bootstrap приложения
- сборку pipeline
- выполнение middleware
- работу с контейнером

Ядро **не содержит бизнес-логики**.

---

### Контейнер
Контейнер в THIS:
- не сканирует код
- не использует рефлексию
- не автоконфигурируется

Он:
- читает конфигурацию
- знает, как создать сервис
- создаёт только реально используемые объекты

Конфигурация контейнера может быть разнесена по файлам:
- сервисы
- хендлеры
- фабрики
- middleware
- vendor-пакеты

---

### Middleware
Middleware:
- линейны
- не ветвят pipeline
- не изменяют pipeline
- выполняют одну чёткую задачу

Middleware **не должны**:
- содержать бизнес-логику
- знать про i18n
- динамически создавать сервисы

---

### Валидация
Пакет валидации:
- не знает про i18n
- не знает про контейнер
- не форматирует сообщения
- не имеет побочных эффектов

Он:
- валидирует данные
- возвращает результат

`FormSchema` — **декларативный объект**, а не сервис.

---

### i18n
i18n — инфраструктурный слой.

- Переводы — обычные PHP-файлы
- Ключи могут быть человекочитаемым текстом
- Отсутствие перевода допустимо
- Локаль приходит извне (Context)

i18n **никогда не участвует в валидации напрямую**.

---

## Bootstrap и boundary-слои

THIS чётко различает:
- декларацию (schemas, rules, структура)
- исполнение (handlers, middleware)
- boundary-логику (HTTP, CLI, workers)

Создание объектов с зависимостями допустимо **только на boundary-уровнях**.

---

## Почему без автоконфигурации

Автоконфигурация:
- скрывает зависимости
- усложняет отладку
- требует compile-time контейнеров
- требует кэширования

THIS сознательно отказывается от неё в пользу:
- прозрачности
- предсказуемости
- архитектурной ясности

---

## Кэширование

THIS **не требует** кэша контейнера.

Возможные кэши:
- OPcache
- кэш конфигурации окружения
- кэш маршрутов (опционально)

Если системе нужен кэш для нормальной работы —
это чаще всего архитектурная проблема.

---

## Философия проекта

THIS — это не «ещё один фреймворк».

Это:
- архитектурный каркас
- инструмент осознанного проектирования
- система, в которой всегда понятно,
  *почему* всё работает именно так

Проект делает ставку на:
- долгосрочную поддержку
- простоту reasoning’а
- минимум скрытых решений

---

## Для кого этот проект

THIS подойдёт, если ты:
- хочешь понимать систему целиком
- ценишь явные зависимости
- строишь инфраструктуру
- готов писать явный код ради ясности

THIS **не подойдёт**, если ты:
- ожидаешь zero-config
- хочешь автосканирование
- ищешь замену Symfony или Laravel

---

## Статус

THIS находится в активной разработке.
Архитектурные решения принимаются осознанно,
без спешки и без давления backward compatibility.
